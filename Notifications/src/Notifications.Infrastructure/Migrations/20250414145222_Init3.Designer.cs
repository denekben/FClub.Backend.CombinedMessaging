// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Notifications.Infrastructure.Data;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;

#nullable disable

namespace Notifications.Infrastructure.Migrations
{
    [DbContext(typeof(AppDbContext))]
    [Migration("20250414145222_Init3")]
    partial class Init3
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasDefaultSchema("FClub.Notifications")
                .HasAnnotation("ProductVersion", "9.0.4")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("Notifications.Domain.Entities.AppUser", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<bool>("IsBlocked")
                        .HasColumnType("boolean");

                    b.HasKey("Id");

                    b.ToTable("AppUsers", "FClub.Notifications");
                });

            modelBuilder.Entity("Notifications.Domain.Entities.Client", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<bool>("AllowNotifications")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("LastEntry")
                        .HasColumnType("timestamp without time zone");

                    b.Property<DateTime>("LastNotification")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("Phone")
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedDate")
                        .HasColumnType("timestamp without time zone");

                    b.HasKey("Id");

                    b.ToTable("Clients", "FClub.Notifications");
                });

            modelBuilder.Entity("Notifications.Domain.Entities.Notification", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("Text")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedDate")
                        .HasColumnType("timestamp without time zone");

                    b.HasKey("Id");

                    b.ToTable("Notifications", "FClub.Notifications");

                    b.HasData(
                        new
                        {
                            Id = new Guid("9944abc0-24c8-48d6-b841-add6abd8926a"),
                            CreatedDate = new DateTime(2025, 4, 14, 14, 52, 21, 915, DateTimeKind.Utc).AddTicks(8646),
                            Text = "\r\n            <!DOCTYPE html>\r\n            <html>\r\n            <head>\r\n                <meta charset=\"UTF-8\">\r\n                <title>Открытие нового филиала</title>\r\n                <style>\r\n                    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n                    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n                    .header { background-color: #4a6fa5; color: white; padding: 20px; text-align: center; }\r\n                    .content { padding: 20px; background-color: #f9f9f9; }\r\n                    .footer { padding: 20px; text-align: center; font-size: 12px; color: #777; }\r\n                    .button { display: inline-block; padding: 10px 20px; background-color: #4a6fa5; color: white; text-decoration: none; border-radius: 4px; }\r\n                    ul { padding-left: 20px; }\r\n                </style>\r\n            </head>\r\n            <body>\r\n                <div class=\"container\">\r\n                    <div class=\"header\">\r\n                        <h1>Открытие нового филиала!</h1>\r\n                    </div>\r\n                    <div class=\"content\">\r\n                        <p>Уважаемый клиент,</p>\r\n                        <p>Мы рады сообщить вам об открытии нового филиала <strong>{branch.Name}</strong> по адресу: <strong>{branch.Address}</strong>.</p>\r\n            \r\n                        <h3>В новом филиале доступны услуги:</h3>\r\n                        <ul>{branch.ServicesList}</ul>\r\n            \r\n                        <p>Приглашаем вас посетить наш новый филиал и воспользоваться нашими услугами.</p>\r\n            \r\n                        <p style=\"text-align: center;\">\r\n                            <a href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\" class=\"button\">Посмотреть на карте</a>\r\n                        </p>\r\n                    </div>\r\n                    <div class=\"footer\">\r\n                        <p>© 2023 Ваша компания. Все права защищены.</p>\r\n                        <p>\r\n                            <a href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\">Сайт</a> | \r\n                            <a href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\">Контакты</a> | \r\n                            <a href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\">Отписаться</a>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </body>\r\n            </html>\r\n        ",
                            Title = "Оповещение о посещаемости"
                        },
                        new
                        {
                            Id = new Guid("fb5e28d9-8c3e-45ee-a2d4-596862ae9c4f"),
                            CreatedDate = new DateTime(2025, 4, 14, 14, 52, 21, 915, DateTimeKind.Utc).AddTicks(8811),
                            Text = "\r\n            <!DOCTYPE html>\r\n            <html>\r\n            <head>\r\n                <meta charset=\"UTF-8\">\r\n                <title>Новый тариф</title>\r\n                <style>\r\n                    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n                    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n                    .header { background-color: #5cb85c; color: white; padding: 20px; text-align: center; }\r\n                    .content { padding: 20px; background-color: #f9f9f9; }\r\n                    .footer { padding: 20px; text-align: center; font-size: 12px; color: #777; }\r\n                    .button { display: inline-block; padding: 10px 20px; background-color: #5cb85c; color: white; text-decoration: none; border-radius: 4px; }\r\n                    .price { font-size: 24px; color: #5cb85c; font-weight: bold; }\r\n                    ul { padding-left: 20px; }\r\n                </style>\r\n            </head>\r\n            <body>\r\n                <div class=\"container\">\r\n                    <div class=\"header\">\r\n                        <h1>Новый тариф \"{tariff.Name}\"</h1>\r\n                    </div>\r\n                    <div class=\"content\">\r\n                        <p>Уважаемый клиент,</p>\r\n                        <p>Мы рады представить вам наш новый тарифный план, который создан специально для ваших потребностей!</p>\r\n            \r\n                        <h3>Основные характеристики тарифа:</h3>\r\n                        <ul>{tariff.ServicesList}</ul>\r\n            \r\n                        <p class=\"price\">Всего {tariff.Price} руб./мес.</p>\r\n            \r\n                        <p>{tariff.AllowMultiBranches}</p>\r\n            \r\n                        <p style=\"text-align: center;\">\r\n                            <a href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\" class=\"button\">Подробнее о тарифе</a>\r\n                        </p>\r\n                    </div>\r\n                    <div class=\"footer\">\r\n                        <p>© 2023 Ваша компания. Все права защищены.</p>\r\n                        <p>\r\n                            <a href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\">Сайт</a> | \r\n                            <a href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\">Контакты</a> | \r\n                            <a href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\">Отписаться</a>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </body>\r\n            </html>\r\n        ",
                            Title = "Оповещение о тарифе"
                        },
                        new
                        {
                            Id = new Guid("9d0cf72e-afe9-4185-a0f6-73bf22ea4aaa"),
                            CreatedDate = new DateTime(2025, 4, 14, 14, 52, 21, 915, DateTimeKind.Utc).AddTicks(8813),
                            Text = "\r\n            <!DOCTYPE html>\r\n            <html>\r\n            <head>\r\n                <meta charset=\"UTF-8\">\r\n                <title>Мы скучаем по вам!</title>\r\n                <style>\r\n                    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n                    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n                    .header { background-color: #f0ad4e; color: white; padding: 20px; text-align: center; }\r\n                    .content { padding: 20px; background-color: #f9f9f9; }\r\n                    .footer { padding: 20px; text-align: center; font-size: 12px; color: #777; }\r\n                    .button { display: inline-block; padding: 10px 20px; background-color: #f0ad4e; color: white; text-decoration: none; border-radius: 4px; }\r\n                    .discount { font-size: 24px; color: #d9534f; font-weight: bold; }\r\n                </style>\r\n            </head>\r\n            <body>\r\n                <div class=\"container\">\r\n                    <div class=\"header\">\r\n                        <h1>{client.Name}, мы скучаем по вам!</h1>\r\n                    </div>\r\n                    <div class=\"content\">\r\n                        <p>Дорогой {client.Name},</p>\r\n                        <p>Мы заметили, что вы давно не посещали наши филиалы, и очень по вам скучаем!</p>\r\n            \r\n                        <p>Хотим напомнить, что у нас есть много интересных предложений и новых услуг, которые могут вас заинтересовать.</p>\r\n            \r\n                        <p class=\"discount\">Специально для вас - скидка 15% на первую услугу при посещении в этом месяце!</p>\r\n            \r\n                        <p>Просто покажите это письмо при посещении, чтобы получить скидку.</p>\r\n            \r\n                        <p style=\"text-align: center;\">\r\n                            <a href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\" class=\"button\">Посмотреть акции</a>\r\n                        </p>\r\n                    </div>\r\n                    <div class=\"footer\">\r\n                        <p>© 2023 Ваша компания. Все права защищены.</p>\r\n                        <p>\r\n                            <a href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\">Сайт</a> | \r\n                            <a href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\">Контакты</a> | \r\n                            <a href=\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\">Отписаться</a>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </body>\r\n            </html>\r\n        ",
                            Title = "Оповещение о филиале"
                        });
                });

            modelBuilder.Entity("Notifications.Domain.Entities.NotificationSettings", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<bool>("AllowAttendanceNotifications")
                        .HasColumnType("boolean");

                    b.Property<bool>("AllowBranchfNotifications")
                        .HasColumnType("boolean");

                    b.Property<bool>("AllowTariffNotifications")
                        .HasColumnType("boolean");

                    b.Property<string>("AttendanceEmailSubject")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid?>("AttendanceNotificationId")
                        .HasColumnType("uuid");

                    b.Property<long>("AttendanceNotificationPeriod")
                        .HasColumnType("bigint");

                    b.Property<long>("AttendanceNotificationReSendPeriod")
                        .HasColumnType("bigint");

                    b.Property<string>("BranchEmailSubject")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid?>("BranchNotificationId")
                        .HasColumnType("uuid");

                    b.Property<string>("TariffEmailSubject")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid?>("TariffNotificationId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("AttendanceNotificationId")
                        .IsUnique();

                    b.HasIndex("BranchNotificationId")
                        .IsUnique();

                    b.HasIndex("TariffNotificationId")
                        .IsUnique();

                    b.ToTable("NotificationSettings", "FClub.Notifications");

                    b.HasData(
                        new
                        {
                            Id = new Guid("8c0a8d4d-8536-40dd-92c8-d5c180253cff"),
                            AllowAttendanceNotifications = true,
                            AllowBranchfNotifications = true,
                            AllowTariffNotifications = true,
                            AttendanceEmailSubject = "Вас давно с нами не было!",
                            AttendanceNotificationId = new Guid("9944abc0-24c8-48d6-b841-add6abd8926a"),
                            AttendanceNotificationPeriod = 7L,
                            AttendanceNotificationReSendPeriod = 7L,
                            BranchEmailSubject = "Мы расширяемся!",
                            BranchNotificationId = new Guid("9d0cf72e-afe9-4185-a0f6-73bf22ea4aaa"),
                            TariffEmailSubject = "У нас новинки!",
                            TariffNotificationId = new Guid("fb5e28d9-8c3e-45ee-a2d4-596862ae9c4f")
                        });
                });

            modelBuilder.Entity("Notifications.Domain.Entities.UserLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("AppUserId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("ServiceName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Text")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("UpdatedDate")
                        .HasColumnType("timestamp without time zone");

                    b.HasKey("Id");

                    b.ToTable("UserLogs", "FClub.Notifications");
                });

            modelBuilder.Entity("Notifications.Domain.Entities.Client", b =>
                {
                    b.OwnsOne("FClub.Backend.Common.ValueObjects.FullName", "FullName", b1 =>
                        {
                            b1.Property<Guid>("ClientId")
                                .HasColumnType("uuid");

                            b1.Property<string>("FirstName")
                                .IsRequired()
                                .HasColumnType("text");

                            b1.Property<string>("Patronymic")
                                .HasColumnType("text");

                            b1.Property<string>("SecondName")
                                .IsRequired()
                                .HasColumnType("text");

                            b1.HasKey("ClientId");

                            b1.ToTable("Clients", "FClub.Notifications");

                            b1.WithOwner()
                                .HasForeignKey("ClientId");
                        });

                    b.Navigation("FullName")
                        .IsRequired();
                });

            modelBuilder.Entity("Notifications.Domain.Entities.NotificationSettings", b =>
                {
                    b.HasOne("Notifications.Domain.Entities.Notification", "AttendanceNotification")
                        .WithOne("AttendanceNotificationSettings")
                        .HasForeignKey("Notifications.Domain.Entities.NotificationSettings", "AttendanceNotificationId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("Notifications.Domain.Entities.Notification", "BranchNotification")
                        .WithOne("BranchNotificationSettings")
                        .HasForeignKey("Notifications.Domain.Entities.NotificationSettings", "BranchNotificationId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("Notifications.Domain.Entities.Notification", "TariffNotification")
                        .WithOne("TariffNotificationSettings")
                        .HasForeignKey("Notifications.Domain.Entities.NotificationSettings", "TariffNotificationId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("AttendanceNotification");

                    b.Navigation("BranchNotification");

                    b.Navigation("TariffNotification");
                });

            modelBuilder.Entity("Notifications.Domain.Entities.Notification", b =>
                {
                    b.Navigation("AttendanceNotificationSettings")
                        .IsRequired();

                    b.Navigation("BranchNotificationSettings")
                        .IsRequired();

                    b.Navigation("TariffNotificationSettings")
                        .IsRequired();
                });
#pragma warning restore 612, 618
        }
    }
}
